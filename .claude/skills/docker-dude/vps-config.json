{
  "host": "srv1015344.hstgr.cloud",
  "user": "root",
  "sshKey": "~/.ssh/id_ed25519",
  "projectPath": "/root/Resonance-Lab",
  "composeFile": "/root/docker compose.yml",
  "lastUpdated": "2025-12-03T02:15:00Z",
  "containers": {
    "backend": {
      "name": "resonance-backend",
      "image": "resonance-lab-backend",
      "internalPort": 8080,
      "status": "Up 4 days",
      "healthCheck": "/api/songs",
      "logKeywords": ["GET /api", "Starting server on :8080"],
      "volumes": ["./songs:/app/songs"],
      "env": {
        "SONGS_DIR": "/app/songs",
        "ADDR": ":8080"
      },
      "notes": "Production backend - ports NOT bound to host, use Traefik routing"
    },
    "backend-dev": {
      "name": "resonance-backend-dev",
      "image": "resonance-lab-backend-dev",
      "internalPort": 8081,
      "healthCheck": "/api/health",
      "env": {
        "SONGS_DIR": "/app/songs",
        "ADDR": ":8081"
      },
      "notes": "Dev backend on stage branch - deployed via GitHub Actions"
    },
    "traefik": {
      "name": "root-traefik-1",
      "image": "traefik",
      "ports": [80, 443],
      "status": "Up 5 days",
      "healthCheck": "https://srv1015344.hstgr.cloud/api/songs",
      "labels": {
        "domain": "srv1015344.hstgr.cloud",
        "pathPrefix": "/api",
        "tls": true
      }
    },
    "n8n": {
      "name": "root-n8n-1",
      "image": "docker.n8n.io/n8nio/n8n",
      "port": 5678,
      "status": "Up 5 days",
      "internalOnly": true
    }
  },
  "network": {
    "name": "root_default",
    "external": true,
    "notes": "Internal Docker networking - use external Traefik URL for health checks"
  },
  "domains": {
    "api": "https://srv1015344.hstgr.cloud/api",
    "devApi": "https://dev.srv1015344.hstgr.cloud/api",
    "frontend": "https://resonance-lab.vercel.app"
  },
  "endpoints": {
    "/api/songs": "GET - List all songs",
    "/api/songs/:artist/:song": "GET - Get specific song",
    "/api/search": "POST - Search songs",
    "/api/health": "GET - Health check"
  },
  "commonIssues": {
    "containerStopped": "docker compose up -d",
    "highMemory": "docker system prune -f && docker compose restart",
    "apiUnresponsive": "docker compose restart backend",
    "permissionError": "chmod -R 755 songs && docker compose restart backend",
    "diskFull": "docker system prune -af --volumes",
    "orphanedContainers": "docker container prune -f && docker compose up -d --remove-orphans",
    "nameConflict": "docker rm -f <conflicting_container> && docker container prune -f"
  },
  "cicdFixes": {
    "orphanedContainerConflict": {
      "error": "Conflict. The container name is already in use",
      "cause": "Failed deploy left orphaned container with temp name prefix",
      "fix": "Added to reusable-deploy-backend.yml: docker container prune -f && --remove-orphans flag",
      "dateFixed": "2025-12-03"
    }
  },
  "diagnosticCommands": {
    "quickStatus": "docker ps --format 'table {{.Names}}\\t{{.Status}}' | grep -E 'resonance|traefik|n8n'",
    "apiTest": "curl -sf https://srv1015344.hstgr.cloud/api/songs | head -3",
    "logs": "docker logs resonance-backend --tail=50",
    "diskSpace": "df -h / | tail -1",
    "fullHealth": "docker ps && curl -sf https://srv1015344.hstgr.cloud/api/songs && docker stats --no-stream | grep resonance"
  }
}
